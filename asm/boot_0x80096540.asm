.set noat # allow use of $at
.set noreorder # don't insert nops after branches
.set gp=64 # allow use of 64bit registers
.macro glabel label
    .global \label
    \label:
.endm


glabel func_80096540
/* 022840 0x80096540 27BDFF90 */ addiu	$sp, $sp, -0X70
/* 022841 0x80096544 AFBF003C */ sw	$ra, 0X3C($sp)
/* 022842 0x80096548 AFB60030 */ sw	$s6, 0X30($sp)
/* 022843 0x8009654C AFB5002C */ sw	$s5, 0X2C($sp)
/* 022844 0x80096550 AFB40028 */ sw	$s4, 0X28($sp)
/* 022845 0x80096554 AFB1001C */ sw	$s1, 0X1C($sp)
/* 022846 0x80096558 00A08825 */ move	$s1, $a1
/* 022847 0x8009655C 0080A825 */ move	$s5, $a0
/* 022848 0x80096560 00E0B025 */ move	$s6, $a3
/* 022849 0x80096564 AFBE0038 */ sw	$fp, 0X38($sp)
/* 022850 0x80096568 AFB70034 */ sw	$s7, 0X34($sp)
/* 022851 0x8009656C AFB30024 */ sw	$s3, 0X24($sp)
/* 022852 0x80096570 AFB20020 */ sw	$s2, 0X20($sp)
/* 022853 0x80096574 AFB00018 */ sw	$s0, 0X18($sp)
/* 022854 0x80096578 AFA60078 */ sw	$a2, 0X78($sp)
/* 022855 0x8009657C 0C0226BC */ jal	__osSiGetAccess
/* 022856 0x80096580 24140002 */ li	$s4, 0X2
/* 022857 0x80096584 97A5007A */ lhu	$a1, 0X7A($sp)
/* 022858 0x80096588 3C1E8009 */ lui	$fp, %hi(D_80097FB0)
/* 022859 0x8009658C 3C17800A */ lui	$s7, %hi(__osContLastCmd)
/* 022860 0x80096590 3C13800A */ lui	$s3, %hi(__osPfsPifRam)
/* 022861 0x80096594 000570C3 */ sra	$t6, $a1, 3
/* 022862 0x80096598 00057940 */ sll	$t7, $a1, 5
/* 022863 0x8009659C AFAF0048 */ sw	$t7, 0X48($sp)
/* 022864 0x800965A0 AFAE004C */ sw	$t6, 0X4C($sp)
/* 022865 0x800965A4 2673E5D0 */ addiu	$s3, $s3, %lo(__osPfsPifRam)
/* 022866 0x800965A8 26F7CF10 */ addiu	$s7, $s7, %lo(__osContLastCmd)
/* 022867 0x800965AC 27DE7FB0 */ addiu	$fp, $fp, %lo(D_80097FB0)
.L800965B0:
/* 022868 0x800965B0 92F80000 */ lbu	$t8, 0X0($s7)
/* 022869 0x800965B4 2401000C */ li	$at, 0XC
/* 022870 0x800965B8 97A5007A */ lhu	$a1, 0X7A($sp)
/* 022871 0x800965BC 17010003 */ bne	$t8, $at, .L800965CC
/* 022872 0x800965C0 02608025 */ move	$s0, $s3
/* 022873 0x800965C4 8FD90000 */ lw	$t9, 0X0($fp)
/* 022874 0x800965C8 12390023 */ beq	$s1, $t9, .L80096658
.L800965CC:
/* 022875 0x800965CC 2408000C */ li	$t0, 0XC
/* 022876 0x800965D0 A2E80000 */ sb	$t0, 0X0($s7)
/* 022877 0x800965D4 AFD10000 */ sw	$s1, 0X0($fp)
/* 022878 0x800965D8 1A200010 */ blez	$s1, .L8009661C
/* 022879 0x800965DC 00001025 */ move	$v0, $zero
/* 022880 0x800965E0 32240003 */ andi	$a0, $s1, 0X3
/* 022881 0x800965E4 10800006 */ beqz	$a0, .L80096600
/* 022882 0x800965E8 00801825 */ move	$v1, $a0
.L800965EC:
/* 022883 0x800965EC 24420001 */ addiu	$v0, $v0, 0X1
/* 022884 0x800965F0 A2000000 */ sb	$zero, 0X0($s0)
/* 022885 0x800965F4 1462FFFD */ bne	$v1, $v0, .L800965EC
/* 022886 0x800965F8 26100001 */ addiu	$s0, $s0, 0X1
/* 022887 0x800965FC 10510007 */ beq	$v0, $s1, .L8009661C
.L80096600:
/* 022888 0x80096600 24420004 */ addiu	$v0, $v0, 0X4
/* 022889 0x80096604 A2000000 */ sb	$zero, 0X0($s0)
/* 022890 0x80096608 A2000001 */ sb	$zero, 0X1($s0)
/* 022891 0x8009660C A2000002 */ sb	$zero, 0X2($s0)
/* 022892 0x80096610 A2000003 */ sb	$zero, 0X3($s0)
/* 022893 0x80096614 1451FFFA */ bne	$v0, $s1, .L80096600
/* 022894 0x80096618 26100004 */ addiu	$s0, $s0, 0X4
.L8009661C:
/* 022895 0x8009661C 24090001 */ li	$t1, 0X1
/* 022896 0x80096620 AE69003C */ sw	$t1, 0X3C($s3)
/* 022897 0x80096624 240A00FF */ li	$t2, 0XFF
/* 022898 0x80096628 240B0007 */ li	$t3, 0X7
/* 022899 0x8009662C 240C0001 */ li	$t4, 0X1
/* 022900 0x80096630 240D000C */ li	$t5, 0XC
/* 022901 0x80096634 240E00FF */ li	$t6, 0XFF
/* 022902 0x80096638 240F00FE */ li	$t7, 0XFE
/* 022903 0x8009663C A20A0000 */ sb	$t2, 0X0($s0)
/* 022904 0x80096640 A20B0001 */ sb	$t3, 0X1($s0)
/* 022905 0x80096644 A20C0002 */ sb	$t4, 0X2($s0)
/* 022906 0x80096648 A20D0003 */ sb	$t5, 0X3($s0)
/* 022907 0x8009664C A20E000A */ sb	$t6, 0XA($s0)
/* 022908 0x80096650 10000002 */ b	.L8009665C
/* 022909 0x80096654 A20F000B */ sb	$t7, 0XB($s0)
.L80096658:
/* 022910 0x80096658 02718021 */ addu	$s0, $s3, $s1
.L8009665C:
/* 022911 0x8009665C 8FB8004C */ lw	$t8, 0X4C($sp)
/* 022912 0x80096660 30A4FFFF */ andi	$a0, $a1, 0XFFFF
/* 022913 0x80096664 0C024428 */ jal	__osContAddressCrc
/* 022914 0x80096668 A2180004 */ sb	$t8, 0X4($s0)
/* 022915 0x8009666C 8FB90048 */ lw	$t9, 0X48($sp)
/* 022916 0x80096670 02C02025 */ move	$a0, $s6
/* 022917 0x80096674 26050006 */ addiu	$a1, $s0, 0X6
/* 022918 0x80096678 00594025 */ or	$t0, $v0, $t9
/* 022919 0x8009667C A2080005 */ sb	$t0, 0X5($s0)
/* 022920 0x80096680 0C0244B0 */ jal	_bcopy
/* 022921 0x80096684 24060004 */ li	$a2, 0X4
/* 022922 0x80096688 24040001 */ li	$a0, 0X1
/* 022923 0x8009668C 0C022B5C */ jal	__osSiRawStartDma
/* 022924 0x80096690 02602825 */ move	$a1, $s3
/* 022925 0x80096694 02C02025 */ move	$a0, $s6
/* 022926 0x80096698 0C023C40 */ jal	func_8008F100
/* 022927 0x8009669C 24050004 */ li	$a1, 0X4
/* 022928 0x800966A0 305200FF */ andi	$s2, $v0, 0XFF
/* 022929 0x800966A4 02A02025 */ move	$a0, $s5
/* 022930 0x800966A8 00002825 */ move	$a1, $zero
/* 022931 0x800966AC 0C021FB4 */ jal	osRecvMesg
/* 022932 0x800966B0 24060001 */ li	$a2, 0X1
/* 022933 0x800966B4 00002025 */ move	$a0, $zero
/* 022934 0x800966B8 0C022B5C */ jal	__osSiRawStartDma
/* 022935 0x800966BC 02602825 */ move	$a1, $s3
/* 022936 0x800966C0 02A02025 */ move	$a0, $s5
/* 022937 0x800966C4 00002825 */ move	$a1, $zero
/* 022938 0x800966C8 0C021FB4 */ jal	osRecvMesg
/* 022939 0x800966CC 24060001 */ li	$a2, 0X1
/* 022940 0x800966D0 92030002 */ lbu	$v1, 0X2($s0)
/* 022941 0x800966D4 306900C0 */ andi	$t1, $v1, 0XC0
/* 022942 0x800966D8 00091903 */ sra	$v1, $t1, 4
/* 022943 0x800966DC 5460000D */ bnezl	$v1, .L80096714
/* 022944 0x800966E0 24030001 */ li	$v1, 0X1
/* 022945 0x800966E4 920B000A */ lbu	$t3, 0XA($s0)
/* 022946 0x800966E8 02A02025 */ move	$a0, $s5
/* 022947 0x800966EC 02202825 */ move	$a1, $s1
/* 022948 0x800966F0 51720009 */ beql	$t3, $s2, .L80096718
/* 022949 0x800966F4 24010004 */ li	$at, 0X4
/* 022950 0x800966F8 0C0249CC */ jal	func_80092730
/* 022951 0x800966FC 27A6006B */ addiu	$a2, $sp, 0X6B
/* 022952 0x80096700 14400009 */ bnez	$v0, .L80096728
/* 022953 0x80096704 00401825 */ move	$v1, $v0
/* 022954 0x80096708 10000002 */ b	.L80096714
/* 022955 0x8009670C 24030004 */ li	$v1, 0X4
/* 022956 0x80096710 24030001 */ li	$v1, 0X1
.L80096714:
/* 022957 0x80096714 24010004 */ li	$at, 0X4
.L80096718:
/* 022958 0x80096718 14610003 */ bne	$v1, $at, .L80096728
/* 022959 0x8009671C 2A820000 */ slti	$v0, $s4, 0X0
/* 022960 0x80096720 1040FFA3 */ beqz	$v0, .L800965B0
/* 022961 0x80096724 2694FFFF */ addiu	$s4, $s4, -0X1
.L80096728:
/* 022962 0x80096728 0C0226CD */ jal	__osSiRelAccess
/* 022963 0x8009672C AFA3006C */ sw	$v1, 0X6C($sp)
/* 022964 0x80096730 8FBF003C */ lw	$ra, 0X3C($sp)
/* 022965 0x80096734 8FA2006C */ lw	$v0, 0X6C($sp)
/* 022966 0x80096738 8FB00018 */ lw	$s0, 0X18($sp)
/* 022967 0x8009673C 8FB1001C */ lw	$s1, 0X1C($sp)
/* 022968 0x80096740 8FB20020 */ lw	$s2, 0X20($sp)
/* 022969 0x80096744 8FB30024 */ lw	$s3, 0X24($sp)
/* 022970 0x80096748 8FB40028 */ lw	$s4, 0X28($sp)
/* 022971 0x8009674C 8FB5002C */ lw	$s5, 0X2C($sp)
/* 022972 0x80096750 8FB60030 */ lw	$s6, 0X30($sp)
/* 022973 0x80096754 8FB70034 */ lw	$s7, 0X34($sp)
/* 022974 0x80096758 8FBE0038 */ lw	$fp, 0X38($sp)
/* 022975 0x8009675C 03E00008 */ jr	$ra
/* 022976 0x80096760 27BD0070 */ addiu	$sp, $sp, 0X70
/* 022977 0x80096764 00000000 */ nop
/* 022978 0x80096768 00000000 */ nop
/* 022979 0x8009676C 00000000 */ nop
